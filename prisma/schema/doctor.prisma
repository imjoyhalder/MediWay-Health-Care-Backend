model Doctor {
    id String @id @default(uuid())

    name          String
    email         String    @unique
    profilePhoto  String?
    contactNumber String?
    address       String?
    isDeleted     Boolean   @default(false)
    deletedAt     DateTime?

    registrationNumber  String  @unique
    experience          Int     @default(0)
    gender              Gender
    appointmentFee      Float
    qualification       String
    currentWorkingPlace String?
    designation         String
    averageRating       Float   @default(0.0)

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt

    // Relations
    userId          String            @unique
    user            User              @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
    specialties     DoctorSpecialty[]
    doctorSchedules DoctorSchedules[]
    appointments    Appointment[]
    reviews         Review[]
    medicalReports  MedicalReport[]
    prescriptions   Prescription[]

    @@index([email], name: "idx_doctor_email")
    @@index([isDeleted], name: "idx_doctor_isDeleted")
    @@map("doctor")
}

model DoctorSchedules {
    id         String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
    doctorId   String   @db.Uuid
    scheduleId String   @db.Uuid
    isBooked   Boolean  @default(false)
    createdAt  DateTime @default(now())
    updatedAt  DateTime @updatedAt

    // Relations
    doctor   Doctor   @relation(fields: [doctorId], references: [id])
    schedule Schedule @relation(fields: [scheduleId], references: [id])

    // An appointment is associated with this specific doctor's schedule slot
    appointment Appointment?

    @@unique([doctorId, scheduleId])
    @@map("doctor_schedules")
}
